# Terraform provider for Looker

Terraform provider for [looker](https://www.looker.com/), built without dependencies on official go-sdk.
Autogenerated terraform docs available at [Looker Documentation](https://registry.terraform.io/providers/zendesk/looker/latest/docs). <br/>
Provider available at [Terraform registry](https://registry.terraform.io/providers/zendesk/looker).

## License

This repository is open source, please refer to the [License](https://github.com/zendesk/terraform-provider-looker/blob/main/LICENSE) for more information.

## Getting Started & Documentation

If you're new to Terraform and want to get started creating infrastructure, please check out the Terraform official [Getting Started guides](https://learn.hashicorp.com/terraform#getting-started) on HashiCorp's learning platform. There are also [additional guides](https://learn.hashicorp.com/terraform#operations-and-development) to continue your learning.

### Use the provider

```
terraform {
  required_providers {
    looker = {
      source  = "zendesk/looker"
      version = "x.x.x"
    }
  }
}

provider "looker" {
  base_url      = "https://org.cloud.looker.com:19999/api/" # Optionally use env var LOOKER_BASE_URL !!! use /api/ at the end of your url !!!
  client_id     = "xxxxxxxx"                                # Optionally use env var LOOKER_API_CLIENT_ID
  client_secret = "xxxxxxxx"                                # Optionally use env var LOOKER_API_CLIENT_SECRET
}
```

## Developing the provider

To learn more about how to contribute to the development of this provider please refer to the [community guidelines](https://github.com/zendesk/terraform-provider-looker/blob/main/CONTRIBUTING.md).

**Did you find a vulnerability?** Please refer to the [Security Policy](https://github.com/zendesk/terraform-provider-looker/security/policy) for more information.

### Makefile

The make command provides an easy way to access commands for local development of the provider.

- To build the provider locally, you can execute the make command at the root of the project.

  ```
  make build
  ```

  *Alternatively: 'go build -o terraform-provider-looker'*
- To format all the go files in the project.

  ```
  make format
  ```

  *Alternatively: 'gofmt -l -s -w .'*
- To generate documentation using the tfplugindocs plugin.

  ```
  make docs
  ```

  *Alternatively: 'go run github.com/hashicorp/terraform-plugin-docs/cmd/tfplugindocs'*


### Use locally built provider

1. Create directory```~/.terraform.d/plugins/hashicorp.local/zendesk/looker/{version}/{architecture}``` eg ``mkdir -p ~/.terraform.d/plugins/hashicorp.local/zendesk/looker/0.1.2/linux_amd64``
2. Move the built file `terraform-provider-looker` from `build/zendesk/{version}/terraform-provider-looker` to the directory created in step 1.
3. You can use the provider now by setting the source to "hashicorp.local/zendesk/looker"

   ```
   terraform {
      required_providers {
         looker = {
            source  = "hashicorp.local/zendesk/looker"
            version = "x.x.x"
         }
      }
   }
   ```


## Notes

Looker doesn't support concurrent operations on their database. That's why we are required to limit parallelism to <b>1</b> during the applying of heavy operations with multiple user creations.
Here is how to do it:

```
terraform apply -parallelism=1
```

If parallelism is not limited, the Looker API may return <B>500 exceptions</b> for heavy operations.
